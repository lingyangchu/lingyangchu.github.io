(("undefined"!=typeof self?self:this).webpackJsonp_pro_gallery_santa_wrapper=("undefined"!=typeof self?self:this).webpackJsonp_pro_gallery_santa_wrapper||[]).push([[20],{352:function(e,t,i){"use strict";i.r(t);var r=i(0),o=i.n(r),a=i(8),s=i(4),n=i(5);function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){d(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=function(e){var t,r;function p(t){var i;return(i=e.call(this,t)||this).pause=i.pause.bind(c(i)),i.play=i.play.bind(c(i)),i.playVideoIfNeeded=i.playVideoIfNeeded.bind(c(i)),i.state={playedOnce:!1,playing:!1,reactPlayerLoaded:!1,vimeoPlayerLoaded:!1,hlsPlayerLoaded:!1},i}r=e,(t=p).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var d=p.prototype;return d.componentDidMount=function(){this.dynamiclyImportVideoPlayers()},d.dynamiclyImportVideoPlayers=function(){var e=this;a.a&&a.a.ReactPlayer||i.e(16).then(i.t.bind(null,330,7)).then((function(t){a.a.ReactPlayer=t.default,e.setState({reactPlayerLoaded:!0}),e.playVideoIfNeeded()})),a.a&&a.a.Vimeo||!this.props.videoUrl||!this.props.videoUrl.includes("vimeo.com")||i.e(0).then(i.bind(null,327)).then((function(t){a.a.Vimeo={Player:t.default},e.setState({vimeoPlayerLoaded:!0}),e.playVideoIfNeeded()})),a.a&&a.a.Hls||!this.isHLSVideo()||i.e(2).then(i.t.bind(null,347,7)).then((function(t){a.a.Hls=t.default,e.setState({hlsPlayerLoaded:!0}),e.playVideoIfNeeded()}))},d.isHLSVideo=function(){return this.props.videoUrl&&(this.props.videoUrl.includes("/hls")||this.props.videoUrl.includes(".m3u8"))},d.shouldUseHlsPlayer=function(){return this.isHLSVideo()&&!s.a.isiOS()},d.shouldForceVideoForHLS=function(){return this.isHLSVideo()&&s.a.isiOS()},d.componentWillReceiveProps=function(e){e.playing&&this.setState({playedOnce:!0}),this.playVideoIfNeeded(e)},d.componentDidUpdate=function(e){e.currentIdx!==this.props.currentIdx&&this.fixIFrameTabIndexIfNeeded(),"image"===e.type&&"video"===this.props.type&&this.dynamiclyImportVideoPlayers(),this.playVideoIfNeeded()},d.play=function(){this.props.playVideo(this.props.idx)},d.pause=function(){this.props.pauseVideo()},d.playVideoIfNeeded=function(e){void 0===e&&(e=this.props);try{e.playingVideoIdx!==this.props.idx||this.isPlaying||(this.videoElement=this.videoElement||a.a.document.querySelector("#video-"+this.props.id+" video"),this.videoElement&&(this.isPlaying=!0,this.videoElement.play(),s.a.isVerbose()&&console.log("[VIDEO] Playing video #"+this.props.idx,this.videoElement)))}catch(e){console.error("[VIDEO] Could not play video #"+this.props.idx,this.videoElement,e)}},d.createPlayerElement=function(){var e=this;if(!a.a||!a.a.ReactPlayer)return null;var t=a.a.ReactPlayer,i=this.props.style.ratio>=this.props.cubeRatio,r={width:i?"100%":"auto",height:i?"auto":"100%"};if(this.props.styleParams.cubeImages&&"fill"===this.props.styleParams.cubeType){var s=[r.height,r.width];r.width=s[0],r.height=s[1],r.position="absolute",r.margin="auto",r.minHeight="100%",r.minWidth="100%",r.left="-100%",r.right="-100%",r.top="-100%",r.bottom="-100%"}var p=this.props.videoUrl?this.props.videoUrl:this.props.createUrl(n.a.urlSizes.RESIZED,n.a.urlTypes.VIDEO);return o.a.createElement(t,{className:"gallery-item-visible video gallery-item",id:"video-"+this.props.id,width:"100%",height:"100%",url:p,alt:this.props.alt?this.props.alt:"untitled video",loop:!!this.props.styleParams.videoLoop,ref:function(t){return e.video=t},volume:this.props.styleParams.videoSound?.8:0,playing:this.props.playing,onEnded:function(){e.setState({playing:!1}),e.props.actions.eventsListener(n.a.events.VIDEO_ENDED,e.props)},onPause:function(){e.setState({playing:!1})},onError:function(t){e.props.actions.eventsListener(n.a.events.VIDEO_ERROR,l(l({},e.props),{},{videoError:t}))},playbackRate:Number(this.props.styleParams.videoSpeed)||1,onPlay:function(){e.props.actions.eventsListener(n.a.events.VIDEO_PLAYED,e.props),e.setState({playing:!0})},onReady:function(){e.playVideoIfNeeded(),e.fixIFrameTabIndexIfNeeded(),e.props.actions.setItemLoaded(),e.setState({ready:!0})},config:{file:{attributes:{muted:!this.props.styleParams.videoSound,preload:"metadata",poster:this.props.createUrl(n.a.urlSizes.RESIZED,n.a.urlTypes.HIGH_RES),style:r,type:"video/mp4"},forceHLS:this.shouldUseHlsPlayer(),forceVideo:this.shouldForceVideoForHLS()}},key:"video-"+this.props.id})},d.fixIFrameTabIndexIfNeeded=function(){if(this.props.isExternalVideo){var e=a.a.document&&a.a.document.getElementById("video-"+this.props.id),t=e&&e.getElementsByTagName("iframe"),i=t&&t[0];i&&(this.props.currentIdx===this.props.idx?i.setAttribute("tabIndex","0"):i.setAttribute("tabIndex","-1"))}},d.render=function(){var e=this.props.hover,t="gallery-item-content gallery-item-visible gallery-item-preloaded gallery-item-video gallery-item video-item"+(s.a.isiPhone()?" ios":"");this.state.playing&&(t+=" playing");var i=o.a.createElement("div",{className:"pro-circle-preloader",key:"video-preloader-"+this.props.idx}),r=this.props.imageDimensions||{},a=(r.marginLeft,r.marginTop,function(e,t){if(null==e)return{};var i,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||(o[i]=e[i]);return o}(r,["marginLeft","marginTop"])),p=o.a.createElement("div",{className:t+" animated fadeIn ","data-hook":"video_container-video-player-element",key:"video_container-"+this.props.id,style:s.a.deviceHasMemoryIssues()||this.state.ready?{backgroundColor:"black"}:l({backgroundImage:"url("+this.props.createUrl(n.a.urlSizes.RESIZED,n.a.urlTypes.HIGH_RES)+")"},a)},this.createPlayerElement(),this.props.videoControls,i);return o.a.createElement("div",{key:"video-and-hover-container"+this.props.idx},[p,e])},p}(i(20).a);t.default=u}}]);
//# sourceMappingURL=videoItem.chunk.min.js.map